<!DOCTYPE html>
<meta charset="UTF-8" />
<html lang="en">
    <head>
        <title>capsid</title>
        <style>
            canvas {
                height: 250px;
                width: 575px;
                border: 1px solid blue;
            }
        </style>
        <script type="text/javascript" src="js/lib/paper-core.min.js"></script>
        <script type="text/javascript" src="js/democapsid.js"></script>
        <script type="text/javascript">
            paper.install(window);

            const opt = {
                face: {
                    strokeColor: "#000000ff",
                    strokeWidth: 0.5,
                },
                levo: true,
                "hex.mer-1": {
                    fillColor: "#92be5f5a",
                },
                "pen.mer-1": {
                    fillColor: "#6da59bff",
                },
                "hex.mer-2": {
                    fillColor: "#44782cff",
                },
                "pen.mer-2": {
                    fillColor: "#aed6d4ff",
                },
                "hex.mer-3": {
                    fillColor: "#3278adff",
                },
                "pen.mer-3": {
                    fillColor: "#8291c2ff",
                },
            };

            function drawFace(hex) {
                switch (document.getElementById("a").value) {
                    case "i":
                        face = hex.face(opt);
                        face = new Group([face, face.clone().rotate(60, face.bounds.bottomLeft)]);
                        return removeAuxMers(face);
                    case "5":
                        face = hex.face5(opt);
                        return removeAuxMers(face);
                    case "3":
                        face = hex.face3(opt);
                        return removeAuxMers(face);
                }
            }

            function draw() {
                paper.clear();

                const h = parseInt(document.getElementById("h").value);
                const k = parseInt(document.getElementById("k").value);
                const H = parseInt(document.getElementById("H").value);
                const K = parseInt(document.getElementById("K").value);
                const R = parseInt(document.getElementById("R").value);

                var hex = new Hex(h, k, H, K);

                {
                    paper.setup("canvas1");
                    var face = drawFace(hex);
                    var T = face.scale(R);
                    T.position = view.center;
                }
                {
                    paper.setup("canvas2");
                    var face = drawFace(hex);
                    if (document.getElementById("a").value === "3") {
                        T = drawNet3(face, hex).scale(R);
                    } else {
                        T = drawNet(face).scale(R);
                    }
                    face.remove();
                    T.position = view.center;
                }
            }

            window.onload = function (opt) {
                ["h", "k", "H", "K", "R", "a"].forEach((e) => document.getElementById(e).addEventListener("change", draw));
                draw();
            };
        </script>
    </head>

    <body>
        <div>
            <label for="h">h&nbsp;=&nbsp;</label>
            <input type="number" id="h" step="1" value="1" min="0" />
            <label for="k">k&nbsp;=&nbsp;</label>
            <input type="number" id="k" step="1" value="1" min="0" />
            <label for="H">H&nbsp;=&nbsp;</label>
            <input type="number" id="H" step="1" value="1" min="0" />
            <label for="K">K&nbsp;=&nbsp;</label>
            <input type="number" id="K" step="1" value="2" min="0" />
            <label for="R">R&nbsp;=&nbsp;</label>
            <input type="number" id="R" step="1" value="10" min="0" />
            <label for="a"></label>
            <select id="a">
                <option value="i">i</option>
                <option value="5">5</option>
                <option value="3">3</option>
                <!-- <option value="2">2</option> -->
            </select>
        </div>
        <div>
            <canvas id="canvas1" resize> Your browser does not support the HTML canvas tag. </canvas>
            <canvas id="canvas2" resize> Your browser does not support the HTML canvas tag. </canvas>
        </div>
    </body>
</html>
